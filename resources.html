

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Resources &mdash; Tastypie v0.9.0-beta documentation</title>
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '0.9.0-beta',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Tastypie v0.9.0-beta documentation" href="index.html" />
    <link rel="next" title="Api" href="api.html" />
    <link rel="prev" title="Tastypie Settings" href="settings.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="api.html" title="Api"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="settings.html" title="Tastypie Settings"
             accesskey="P">previous</a> |</li>
        <li><a href="toc.html">Tastypie v0.9.0-beta documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="resources">
<span id="ref-resources"></span><h1>Resources<a class="headerlink" href="#resources" title="Permalink to this headline">¶</a></h1>
<p>In terms of a REST-style architecture, a &#8220;resource&#8221; is a collection of similar
data. This data could be a table of a database, a collection of other resources
or a similar form of data storage. In Tastypie, these resources are generally
intermediaries between the end user &amp; objects, usually Django models. As such,
<tt class="docutils literal"><span class="pre">Resource</span></tt> (and its model-specific twin <tt class="docutils literal"><span class="pre">ModelResource</span></tt>) form the heart of
Tastypie&#8217;s functionality.</p>
<div class="section" id="quick-start">
<h2>Quick Start<a class="headerlink" href="#quick-start" title="Permalink to this headline">¶</a></h2>
<p>A sample resource definition might look something like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">django.contrib.auth.models</span> <span class="kn">import</span> <span class="n">User</span>
<span class="kn">from</span> <span class="nn">tastypie</span> <span class="kn">import</span> <span class="n">fields</span>
<span class="kn">from</span> <span class="nn">tastypie.authorization</span> <span class="kn">import</span> <span class="n">DjangoAuthorization</span>
<span class="kn">from</span> <span class="nn">tastypie.resources</span> <span class="kn">import</span> <span class="n">ModelResource</span><span class="p">,</span> <span class="n">ALL</span><span class="p">,</span> <span class="n">ALL_WITH_RELATIONS</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Entry</span>


<span class="k">class</span> <span class="nc">UserResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s">&#39;auth/user&#39;</span>
        <span class="n">excludes</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&#39;password&#39;</span><span class="p">,</span> <span class="s">&#39;is_superuser&#39;</span><span class="p">]</span>


<span class="k">class</span> <span class="nc">EntryResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ForeignKey</span><span class="p">(</span><span class="n">UserResource</span><span class="p">,</span> <span class="s">&#39;user&#39;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">Entry</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
        <span class="n">list_allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;get&#39;</span><span class="p">,</span> <span class="s">&#39;post&#39;</span><span class="p">]</span>
        <span class="n">detail_allowed_methods</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;get&#39;</span><span class="p">,</span> <span class="s">&#39;post&#39;</span><span class="p">,</span> <span class="s">&#39;put&#39;</span><span class="p">,</span> <span class="s">&#39;delete&#39;</span><span class="p">]</span>
        <span class="n">resource_name</span> <span class="o">=</span> <span class="s">&#39;myapp/entry&#39;</span>
        <span class="n">authorization</span> <span class="o">=</span> <span class="n">DjangoAuthorization</span><span class="p">()</span>
        <span class="n">filtering</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&#39;slug&#39;</span><span class="p">:</span> <span class="n">ALL</span><span class="p">,</span>
            <span class="s">&#39;user&#39;</span><span class="p">:</span> <span class="n">ALL_WITH_RELATIONS</span><span class="p">,</span>
            <span class="s">&#39;created&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;exact&#39;</span><span class="p">,</span> <span class="s">&#39;range&#39;</span><span class="p">,</span> <span class="s">&#39;gt&#39;</span><span class="p">,</span> <span class="s">&#39;gte&#39;</span><span class="p">,</span> <span class="s">&#39;lt&#39;</span><span class="p">,</span> <span class="s">&#39;lte&#39;</span><span class="p">],</span>
        <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="why-class-based">
<h2>Why Class-Based?<a class="headerlink" href="#why-class-based" title="Permalink to this headline">¶</a></h2>
<p>Using class-based resources make it easier to extend/modify the code to meet
your needs. APIs are rarely a one-size-fits-all problem space, so Tastypie
tries to get the fundamentals right and provide you with enough hooks to
customize things to work your way.</p>
<p>As is standard, this raises potential problems for thread-safety. Tastypie has
been designed to minimize the possibility of data &#8220;leaking&#8221; between threads.
This does however sometimes introduce some small complexities &amp; you should be
careful not to store state on the instances if you&#8217;re going to be using the
code in a threaded environment.</p>
</div>
<div class="section" id="why-resource-vs-modelresource">
<h2>Why <tt class="docutils literal"><span class="pre">Resource</span></tt> vs. <tt class="docutils literal"><span class="pre">ModelResource</span></tt>?<a class="headerlink" href="#why-resource-vs-modelresource" title="Permalink to this headline">¶</a></h2>
<p>Make no mistake that Django models are far and away the most popular source of
data. However, in practice, there are many times where the ORM isn&#8217;t the data
source. Hooking up things like a NoSQL store, a search solution like Haystack
or even managed filesystem data are all good use cases for <tt class="docutils literal"><span class="pre">Resource</span></tt> knowing
nothing about the ORM.</p>
</div>
<div class="section" id="flow-through-the-request-response-cycle">
<h2>Flow Through The Request/Response Cycle<a class="headerlink" href="#flow-through-the-request-response-cycle" title="Permalink to this headline">¶</a></h2>
<p>TBD</p>
</div>
<div class="section" id="what-are-bundles">
<h2>What Are Bundles?<a class="headerlink" href="#what-are-bundles" title="Permalink to this headline">¶</a></h2>
<p>Bundles are a small abstraction that allow Tastypie to pass data between
resources. This allows us not to depend on passing <tt class="docutils literal"><span class="pre">request</span></tt> to every single
method (especially in places where this would be overkill). It also allows
resources to work with data coming into the application paired together with
an unsaved instance of the object in question.</p>
<p>Think of it as package of user data &amp; an object instance (either of which are
optionally present).</p>
</div>
<div class="section" id="why-resource-uris">
<h2>Why Resource URIs?<a class="headerlink" href="#why-resource-uris" title="Permalink to this headline">¶</a></h2>
<p>Resource URIs play a heavy role in how Tastypie delivers data. This can seem
very different from other solutions which simply inline related data. Though
Tastypie can inline data like that (using <tt class="docutils literal"><span class="pre">full=True</span></tt> on the field with the
relation), the default is to provide URIs.</p>
<p>URIs are useful because it results in smaller payloads, letting you fetch only
the data that is important to you. You can imagine an instance where an object
has thousands of related items that you may not be interested in.</p>
<p>URIs are also very cache-able, because the data at each endpoint is less likely
to frequently change.</p>
<p>And URIs encourage proper use of each endpoint to display the data that endpoint
covers.</p>
<p>Ideology aside, you should use whatever suits you. If you prefer fewer requests
&amp; fewer endpoints, use of <tt class="docutils literal"><span class="pre">full=True</span></tt> is available, but be aware of the
consequences of each approach.</p>
</div>
<div class="section" id="advanced-data-preparation">
<h2>Advanced Data Preparation<a class="headerlink" href="#advanced-data-preparation" title="Permalink to this headline">¶</a></h2>
<p>Tastypie uses a &#8220;dehydrate&#8221; cycle to prepare data for serialization &amp; a
&#8220;hydrate&#8221; cycle to take data sent to it &amp; turn that back into useful Python
objects.</p>
<p>Within these cycles, there are several points of customization if you need them.</p>
<div class="section" id="dehydrate">
<h3><tt class="docutils literal"><span class="pre">dehydrate</span></tt><a class="headerlink" href="#dehydrate" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="dehydrate-foo">
<h3><tt class="docutils literal"><span class="pre">dehydrate_FOO</span></tt><a class="headerlink" href="#dehydrate-foo" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="hydrate">
<h3><tt class="docutils literal"><span class="pre">hydrate</span></tt><a class="headerlink" href="#hydrate" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="hydrate-foo">
<h3><tt class="docutils literal"><span class="pre">hydrate_FOO</span></tt><a class="headerlink" href="#hydrate-foo" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="reverse-relationships">
<h2>Reverse &#8220;Relationships&#8221;<a class="headerlink" href="#reverse-relationships" title="Permalink to this headline">¶</a></h2>
<p>Unlike Django&#8217;s ORM, Tastypie does not automatically create reverse relations.
This is because there is substantial technical complexity involved, as well as
perhaps unintentionally exposing related data in an incorrect way to the end
user of the API.</p>
<p>However, it is still possible to create reverse relations. Doing so is slightly
tricky, because classes are defined in order in Python modules &amp; the class
they are referring to must already exist. Implementing a reverse relationship
looks like so:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">tastypie</span> <span class="kn">import</span> <span class="n">fields</span>
<span class="kn">from</span> <span class="nn">tastypie.resources</span> <span class="kn">import</span> <span class="n">ModelResource</span>
<span class="kn">from</span> <span class="nn">myapp.models</span> <span class="kn">import</span> <span class="n">Note</span><span class="p">,</span> <span class="n">Comment</span>


<span class="k">class</span> <span class="nc">NoteResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>
    <span class="c"># Can&#39;t put the relation to ``CommentResource`` here, as it hasn&#39;t been</span>
    <span class="c"># defined yet...</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">(</span><span class="n">NoteResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="c"># This happens late enough that ``CommentResource`` will exist.</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fields</span><span class="p">[</span><span class="s">&#39;comments&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ToManyField</span><span class="p">(</span><span class="n">CommentResource</span><span class="p">,</span> <span class="s">&#39;comments&#39;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">Note</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>


<span class="k">class</span> <span class="nc">CommentResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>
    <span class="n">note</span> <span class="o">=</span> <span class="n">fields</span><span class="o">.</span><span class="n">ToOneField</span><span class="p">(</span><span class="n">NoteResource</span><span class="p">,</span> <span class="s">&#39;notes&#39;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">queryset</span> <span class="o">=</span> <span class="n">Comment</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="resource-options-aka-meta">
<h2>Resource Options (AKA <tt class="docutils literal"><span class="pre">Meta</span></tt>)<a class="headerlink" href="#resource-options-aka-meta" title="Permalink to this headline">¶</a></h2>
<p>The inner <tt class="docutils literal"><span class="pre">Meta</span></tt> class allows for class-level configuration of how the
<tt class="docutils literal"><span class="pre">Resource</span></tt> should behave. The following options are available:</p>
<blockquote>
Controls which serializer class the <tt class="docutils literal"><span class="pre">Resource</span></tt> should use. Default is
<tt class="docutils literal"><span class="pre">tastypie.serializers.Serializer()</span></tt>.</blockquote>
<blockquote>
Controls which authentication class the <tt class="docutils literal"><span class="pre">Resource</span></tt> should use. Default is
<tt class="docutils literal"><span class="pre">tastypie.authentication.Authentication()</span></tt>.</blockquote>
<blockquote>
Controls which authorization class the <tt class="docutils literal"><span class="pre">Resource</span></tt> should use. Default is
<tt class="docutils literal"><span class="pre">tastypie.authorization.ReadOnlyAuthorization()</span></tt>.</blockquote>
<blockquote>
Controls which cache class the <tt class="docutils literal"><span class="pre">Resource</span></tt> should use. Default is
<tt class="docutils literal"><span class="pre">tastypie.cache.NoCache()</span></tt>.</blockquote>
<blockquote>
Controls which throttle class the <tt class="docutils literal"><span class="pre">Resource</span></tt> should use. Default is
<tt class="docutils literal"><span class="pre">tastypie.throttle.BaseThrottle()</span></tt>.</blockquote>
<blockquote>
<p>Controls what list &amp; detail REST methods the <tt class="docutils literal"><span class="pre">Resource</span></tt> should respond to.
Default is <tt class="xref docutils literal"><span class="pre">None</span></tt>, which means delegate to the more specific
<tt class="docutils literal"><span class="pre">list_allowed_methods</span></tt> &amp; <tt class="docutils literal"><span class="pre">detail_allowed_methods</span></tt> options.</p>
<p>You may specify a list like <tt class="docutils literal"><span class="pre">['get',</span> <span class="pre">'post',</span> <span class="pre">'put',</span> <span class="pre">'delete']</span></tt> as a shortcut
to prevent having to specify the other options.</p>
</blockquote>
<blockquote>
Controls what list REST methods the <tt class="docutils literal"><span class="pre">Resource</span></tt> should respond to. Default
is <tt class="docutils literal"><span class="pre">['get',</span> <span class="pre">'post',</span> <span class="pre">'put',</span> <span class="pre">'delete']</span></tt>.</blockquote>
<blockquote>
Controls what list REST methods the <tt class="docutils literal"><span class="pre">Resource</span></tt> should respond to. Default
is <tt class="docutils literal"><span class="pre">['get',</span> <span class="pre">'post',</span> <span class="pre">'put',</span> <span class="pre">'delete']</span></tt>.</blockquote>
<blockquote>
Controls what how many results the <tt class="docutils literal"><span class="pre">Resource</span></tt> will show at a time. Default
is either the <tt class="docutils literal"><span class="pre">API_LIMIT_PER_PAGE</span></tt> setting (if provided) or <tt class="docutils literal"><span class="pre">20</span></tt> if not
specified.</blockquote>
<blockquote>
An override for the <tt class="docutils literal"><span class="pre">Resource</span></tt> to use when generating resource URLs.
Default is <tt class="xref docutils literal"><span class="pre">None</span></tt>.</blockquote>
<blockquote>
<p>An override for the <tt class="docutils literal"><span class="pre">Resource</span></tt> to use when generating resource URLs.
Default is <tt class="xref docutils literal"><span class="pre">None</span></tt>.</p>
<p>If not provided, the <tt class="docutils literal"><span class="pre">Resource</span></tt> or <tt class="docutils literal"><span class="pre">ModelResource</span></tt> will attempt to name
itself. This means a lowercase version of the classname preceding the word
<tt class="docutils literal"><span class="pre">Resource</span></tt> if present (i.e. <tt class="docutils literal"><span class="pre">SampleContentResource</span></tt> would become
<tt class="docutils literal"><span class="pre">samplecontent</span></tt>).</p>
</blockquote>
<blockquote>
Specifies the default serialization format the <tt class="docutils literal"><span class="pre">Resource</span></tt> should use if
one is not requested (usually by the <tt class="docutils literal"><span class="pre">Accept</span></tt> header or <tt class="docutils literal"><span class="pre">format</span></tt> GET
parameter). Default is <tt class="docutils literal"><span class="pre">application/json</span></tt>.</blockquote>
<blockquote>
<p>Provides a list of fields that the <tt class="docutils literal"><span class="pre">Resource</span></tt> will accept client
filtering on. Default is <tt class="docutils literal"><span class="pre">{}</span></tt>.</p>
<p>Keys should be the fieldnames as strings while values should be a list of
accepted filter types.</p>
</blockquote>
<blockquote>
<p>Specifies the what fields the <tt class="docutils literal"><span class="pre">Resource</span></tt> should should allow ordering on.
Default is <tt class="docutils literal"><span class="pre">[]</span></tt>.</p>
<p>Values should be the fieldnames as strings. When provided to the <tt class="docutils literal"><span class="pre">Resource</span></tt>
by the <tt class="docutils literal"><span class="pre">order_by</span></tt> GET parameter, you can specify either the <tt class="docutils literal"><span class="pre">fieldname</span></tt>
(ascending order) or <tt class="docutils literal"><span class="pre">-fieldname</span></tt> (descending order).</p>
</blockquote>
<blockquote>
<p>Provides the <tt class="docutils literal"><span class="pre">Resource</span></tt> with the object that serves as the data source.
Default is <tt class="xref docutils literal"><span class="pre">None</span></tt>.</p>
<p>In the case of <tt class="docutils literal"><span class="pre">ModelResource</span></tt>, this is automatically populated by the
<tt class="docutils literal"><span class="pre">queryset</span></tt> option and is the model class.</p>
</blockquote>
<blockquote>
<p>Provides the <tt class="docutils literal"><span class="pre">Resource</span></tt> with the set of Django models to respond with.
Default is <tt class="xref docutils literal"><span class="pre">None</span></tt>.</p>
<p>Unused by <tt class="docutils literal"><span class="pre">Resource</span></tt> but present for consistency.</p>
</blockquote>
<blockquote>
Controls what introspected fields the <tt class="docutils literal"><span class="pre">Resource</span></tt> should include.
A whitelist of fields. Default is <tt class="docutils literal"><span class="pre">[]</span></tt>.</blockquote>
<blockquote>
Controls what introspected fields the <tt class="docutils literal"><span class="pre">Resource</span></tt> should <em>NOT</em> include.
A blacklist of fields. Default is <tt class="docutils literal"><span class="pre">[]</span></tt>.</blockquote>
<blockquote>
Specifies if the <tt class="docutils literal"><span class="pre">Resource</span></tt> should include an extra field that displays
the detail URL (within the api) for that resource. Default is <tt class="xref docutils literal"><span class="pre">True</span></tt>.</blockquote>
<blockquote>
Specifies if the <tt class="docutils literal"><span class="pre">Resource</span></tt> should include an extra field that displays
the <tt class="docutils literal"><span class="pre">get_absolute_url</span></tt> for that object (on the site proper). Default is
<tt class="xref docutils literal"><span class="pre">False</span></tt>.</blockquote>
</div>
<div class="section" id="basic-filtering">
<h2>Basic Filtering<a class="headerlink" href="#basic-filtering" title="Permalink to this headline">¶</a></h2>
<p><tt class="xref py py-class docutils literal"><span class="pre">ModelResource</span></tt> provides a basic Django ORM filter
interface. Simply list the resource fields which you&#8217;d like to filter on and
the allowed expression in a <cite>filtering</cite> property of your resource&#8217;s Meta
class:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">tastypie.constants</span> <span class="kn">import</span> <span class="n">ALL</span><span class="p">,</span> <span class="n">ALL_WITH_RELATIONS</span>

<span class="k">class</span> <span class="nc">MyResource</span><span class="p">(</span><span class="n">ModelResource</span><span class="p">):</span>
    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
        <span class="n">filtering</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s">&quot;slug&quot;</span><span class="p">:</span> <span class="p">(</span><span class="s">&#39;exact&#39;</span><span class="p">,</span> <span class="s">&#39;startswith&#39;</span><span class="p">,),</span>
            <span class="s">&quot;title&quot;</span><span class="p">:</span> <span class="n">ALL</span><span class="p">,</span>
        <span class="p">}</span>
</pre></div>
</div>
<p>Valid filtering values are: Django ORM filters (e.g. <tt class="docutils literal"><span class="pre">startswith</span></tt>,
<tt class="docutils literal"><span class="pre">exact</span></tt>, <tt class="docutils literal"><span class="pre">lte</span></tt>, etc. or the <tt class="docutils literal"><span class="pre">ALL</span></tt> or <tt class="docutils literal"><span class="pre">ALL_WITH_RELATIONS</span></tt> constants
defined in <tt class="xref py py-mod docutils literal"><span class="pre">tastypie.constants</span></tt>.</p>
<p>These filters will be extracted from URL query strings using the same
double-underscore syntax as the Django ORM:</p>
<div class="highlight-python"><pre>/api/v1/myresource/?slug=myslug
/api/v1/myresource/?slug__startswith=test</pre>
</div>
</div>
<div class="section" id="advanced-filtering">
<h2>Advanced Filtering<a class="headerlink" href="#advanced-filtering" title="Permalink to this headline">¶</a></h2>
<p>If you need to filter things other than ORM resources or wish to apply
additional constraints (e.g. text filtering using <cite>django-haystack
&lt;http://haystacksearch.org&gt;</cite> rather than simple database queries) your
<tt class="xref py py-class docutils literal"><span class="pre">Resource</span></tt> may define a custom
<tt class="xref py py-meth docutils literal"><span class="pre">build_filters()</span></tt> method which allows you to
filter the queryset before processing a request:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">haystack.query</span> <span class="kn">import</span> <span class="n">SearchQuerySet</span>

<span class="k">class</span> <span class="nc">MyResource</span><span class="p">(</span><span class="n">Resource</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">build_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filters</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">filters</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
            <span class="n">filters</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">orm_filters</span> <span class="o">=</span> <span class="nb">super</span><span class="p">(</span><span class="n">MyResource</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">build_filters</span><span class="p">(</span><span class="n">filters</span><span class="p">)</span>

        <span class="k">if</span> <span class="s">&quot;q&quot;</span> <span class="ow">in</span> <span class="n">filters</span><span class="p">:</span>
            <span class="n">sqs</span> <span class="o">=</span> <span class="n">SearchQuerySet</span><span class="p">()</span><span class="o">.</span><span class="n">auto_query</span><span class="p">(</span><span class="n">filters</span><span class="p">[</span><span class="s">&#39;q&#39;</span><span class="p">])</span>

            <span class="n">orm_filters</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;pk__in&quot;</span><span class="p">:</span> <span class="p">[</span> <span class="n">i</span><span class="o">.</span><span class="n">pk</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">sqs</span> <span class="p">]}</span>

        <span class="k">return</span> <span class="n">orm_filters</span>
</pre></div>
</div>
</div>
<div class="section" id="resource-methods">
<h2><tt class="docutils literal"><span class="pre">Resource</span></tt> Methods<a class="headerlink" href="#resource-methods" title="Permalink to this headline">¶</a></h2>
<p>Handles the data, request dispatch and responding to requests.</p>
<p>Serialization/deserialization is handled &#8220;at the edges&#8221; (i.e. at the
beginning/end of the request/response cycle) so that everything internally
is Python data structures.</p>
<p>This class tries to be non-model specific, so it can be hooked up to other
data sources, such as search results, files, other data, etc.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.wrap_view(self, view):</tt></dt>
<dd></dd></dl>

<p>Wraps methods so they can be called in a more functional way as well
as handling exceptions better.</p>
<p>Note that if <tt class="docutils literal"><span class="pre">BadRequest</span></tt> or an exception with a <tt class="docutils literal"><span class="pre">response</span></tt> attr are seen,
there is special handling to either present a message back to the user or
return the response traveling with the exception.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.urls(self):</tt></dt>
<dd></dd></dl>

<p><em>Property</em></p>
<p>The endpoints this <tt class="docutils literal"><span class="pre">Resource</span></tt> responds to.</p>
<p>Mostly a standard URLconf, this is suitable for either automatic use
when registered with an <tt class="docutils literal"><span class="pre">Api</span></tt> class or for including directly in
a URLconf should you choose to.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.determine_format(self, request):</tt></dt>
<dd></dd></dl>

<p>Used to determine the desired format.</p>
<p>Largely relies on <tt class="docutils literal"><span class="pre">tastypie.utils.mime.determine_format</span></tt> but here
as a point of extension.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.serialize(self, request, data, format, options=None):</tt></dt>
<dd></dd></dl>

<p>Given a request, data and a desired format, produces a serialized
version suitable for transfer over the wire.</p>
<p>Mostly a hook, this uses the <tt class="docutils literal"><span class="pre">Serializer</span></tt> from <tt class="docutils literal"><span class="pre">Resource._meta</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.deserialize(self, request, data, format='application/json'):</tt></dt>
<dd></dd></dl>

<p>Given a request, data and a format, deserializes the given data.</p>
<p>It relies on the request properly sending a <tt class="docutils literal"><span class="pre">CONTENT_TYPE</span></tt> header,
falling back to <tt class="docutils literal"><span class="pre">application/json</span></tt> if not provided.</p>
<p>Mostly a hook, this uses the <tt class="docutils literal"><span class="pre">Serializer</span></tt> from <tt class="docutils literal"><span class="pre">Resource._meta</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.dispatch_list(self, request, **kwargs):</tt></dt>
<dd></dd></dl>

<p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) over
the entire list of resources.</p>
<p>Relies on <tt class="docutils literal"><span class="pre">Resource.dispatch</span></tt> for the heavy-lifting.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.dispatch_detail(self, request, **kwargs):</tt></dt>
<dd></dd></dl>

<p>A view for handling the various HTTP methods (GET/POST/PUT/DELETE) on
a single resource.</p>
<p>Relies on <tt class="docutils literal"><span class="pre">Resource.dispatch</span></tt> for the heavy-lifting.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.dispatch(self, request_type, request, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Handles the common operations (allowed HTTP method, authentication,
throttling, method lookup) surrounding most CRUD interactions.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.remove_api_resource_names(self, url_dict):</tt></dt>
<dd></dd></dl>

<p>Given a dictionary of regex matches from a URLconf, removes
<tt class="docutils literal"><span class="pre">api_name</span></tt> and/or <tt class="docutils literal"><span class="pre">resource_name</span></tt> if found.</p>
<p>This is useful for converting URLconf matches into something suitable
for data lookup. For example:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">Model</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="o">**</span><span class="bp">self</span><span class="o">.</span><span class="n">remove_api_resource_names</span><span class="p">(</span><span class="n">matches</span><span class="p">))</span>
</pre></div>
</div>
<dl class="method">
<dt>
<tt class="descname">Resource.method_check(self, request, allowed=None):</tt></dt>
<dd></dd></dl>

<p>Ensures that the HTTP method used on the request is allowed to be
handled by the resource.</p>
<p>Takes an <tt class="docutils literal"><span class="pre">allowed</span></tt> parameter, which should be a list of lowercase
HTTP methods to check against. Usually, this looks like:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c"># The most generic lookup.</span>
<span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">allowed_methods</span><span class="p">)</span>

<span class="c"># A lookup against what&#39;s allowed for list-type methods.</span>
<span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">_meta</span><span class="o">.</span><span class="n">list_allowed_methods</span><span class="p">)</span>

<span class="c"># A useful check when creating a new endpoint that only handles</span>
<span class="c"># GET.</span>
<span class="bp">self</span><span class="o">.</span><span class="n">method_check</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="p">[</span><span class="s">&#39;get&#39;</span><span class="p">])</span>
</pre></div>
</div>
<dl class="method">
<dt>
<tt class="descname">Resource.is_authorized(self, request, object=None):</tt></dt>
<dd></dd></dl>

<p>Handles checking of permissions to see if the user has authorization
to GET, POST, PUT, or DELETE this resource.  If <tt class="docutils literal"><span class="pre">object</span></tt> is provided,
the authorization backend can apply additional row-level permissions
checking.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.is_authenticated(self, request):</tt></dt>
<dd></dd></dl>

<p>Handles checking if the user is authenticated and dealing with
unauthenticated users.</p>
<p>Mostly a hook, this uses class assigned to <tt class="docutils literal"><span class="pre">authentication</span></tt> from
<tt class="docutils literal"><span class="pre">Resource._meta</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.throttle_check(self, request):</tt></dt>
<dd></dd></dl>

<p>Handles checking if the user should be throttled.</p>
<p>Mostly a hook, this uses class assigned to <tt class="docutils literal"><span class="pre">throttle</span></tt> from
<tt class="docutils literal"><span class="pre">Resource._meta</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.log_throttled_access(self, request):</tt></dt>
<dd></dd></dl>

<p>Handles the recording of the user&#8217;s access for throttling purposes.</p>
<p>Mostly a hook, this uses class assigned to <tt class="docutils literal"><span class="pre">throttle</span></tt> from
<tt class="docutils literal"><span class="pre">Resource._meta</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.build_bundle(self, obj=None, data=None):</tt></dt>
<dd></dd></dl>

<p>Given either an object, a data dictionary or both, builds a <tt class="docutils literal"><span class="pre">Bundle</span></tt>
for use throughout the <tt class="docutils literal"><span class="pre">dehydrate/hydrate</span></tt> cycle.</p>
<p>If no object is provided, an empty object from
<tt class="docutils literal"><span class="pre">Resource._meta.object_class</span></tt> is created so that attempts to access
<tt class="docutils literal"><span class="pre">bundle.obj</span></tt> do not fail.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.build_filters(self, filters=None):</tt></dt>
<dd></dd></dl>

<p>Allows for the filtering of applicable objects.</p>
<p><em>This needs to be implemented at the user level.</em></p>
<p><tt class="docutils literal"><span class="pre">ModelResource</span></tt> includes a full working version specific to Django&#8217;s
<tt class="docutils literal"><span class="pre">Models</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.apply_sorting(self, obj_list, options=None):</tt></dt>
<dd></dd></dl>

<p>Allows for the sorting of objects being returned.</p>
<p><em>This needs to be implemented at the user level.</em></p>
<p><tt class="docutils literal"><span class="pre">ModelResource</span></tt> includes a full working version specific to Django&#8217;s
<tt class="docutils literal"><span class="pre">Models</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.get_resource_uri(self, bundle_or_obj):</tt></dt>
<dd></dd></dl>

<p><em>This needs to be implemented at the user level.</em></p>
<p>A <tt class="docutils literal"><span class="pre">return</span> <span class="pre">reverse(&quot;api_dispatch_detail&quot;,</span> <span class="pre">kwargs={'resource_name':</span>
<span class="pre">self.resource_name,</span> <span class="pre">'pk':</span> <span class="pre">object.id})</span></tt> should be all that would
be needed.</p>
<p><tt class="docutils literal"><span class="pre">ModelResource</span></tt> includes a full working version specific to Django&#8217;s
<tt class="docutils literal"><span class="pre">Models</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.get_resource_list_uri(self):</tt></dt>
<dd></dd></dl>

<p>Returns a URL specific to this resource&#8217;s list endpoint.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.get_via_uri(self, uri):</tt></dt>
<dd></dd></dl>

<p>This pulls apart the salient bits of the URI and populates the
resource via a <tt class="docutils literal"><span class="pre">obj_get</span></tt>.</p>
<p>If you need custom behavior based on other portions of the URI,
simply override this method.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.full_dehydrate(self, obj):</tt></dt>
<dd></dd></dl>

<p>Given an object instance, extract the information from it to populate
the resource.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.dehydrate(self, bundle):</tt></dt>
<dd></dd></dl>

<p>A hook to allow a final manipulation of data once all fields/methods
have built out the dehydrated data.</p>
<p>Useful if you need to access more than one dehydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.full_hydrate(self, bundle):</tt></dt>
<dd></dd></dl>

<p>Given a populated bundle, distill it and turn it back into
a full-fledged object instance.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.hydrate(self, bundle):</tt></dt>
<dd></dd></dl>

<p>A hook to allow a final manipulation of data once all fields/methods
have built out the hydrated data.</p>
<p>Useful if you need to access more than one hydrated field or want
to annotate on additional data.</p>
<p>Must return the modified bundle.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.hydrate_m2m(self, bundle):</tt></dt>
<dd></dd></dl>

<p>Populate the ManyToMany data on the instance.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.build_schema(self):</tt></dt>
<dd></dd></dl>

<p>Returns a dictionary of all the fields on the resource and some
properties about those fields.</p>
<p>Used by the <tt class="docutils literal"><span class="pre">schema/</span></tt> endpoint to describe what will be available.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.dehydrate_resource_uri(self, bundle):</tt></dt>
<dd></dd></dl>

<p>For the automatically included <tt class="docutils literal"><span class="pre">resource_uri</span></tt> field, dehydrate
the URI for the given bundle.</p>
<p>Returns empty string if no URI can be generated.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.generate_cache_key(self, *args, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Creates a unique-enough cache key.</p>
<p>This is based off the current api_name/resource_name/args/kwargs.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.obj_get_list(self, filters=None, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Fetches the list of objects available on the resource.</p>
<p><em>This needs to be implemented at the user level.</em></p>
<p><tt class="docutils literal"><span class="pre">ModelResource</span></tt> includes a full working version specific to Django&#8217;s
<tt class="docutils literal"><span class="pre">Models</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.cached_obj_get_list(self, **kwargs):</tt></dt>
<dd></dd></dl>

<p>A version of <tt class="docutils literal"><span class="pre">obj_get_list</span></tt> that uses the cache as a means to get
commonly-accessed data faster.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.obj_get(self, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Fetches an individual object on the resource.</p>
<p><em>This needs to be implemented at the user level.</em> If the object can not
be found, this should raise a <tt class="docutils literal"><span class="pre">NotFound</span></tt> exception.</p>
<p><tt class="docutils literal"><span class="pre">ModelResource</span></tt> includes a full working version specific to Django&#8217;s
<tt class="docutils literal"><span class="pre">Models</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.cached_obj_get(self, **kwargs):</tt></dt>
<dd></dd></dl>

<p>A version of <tt class="docutils literal"><span class="pre">obj_get</span></tt> that uses the cache as a means to get
commonly-accessed data faster.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.obj_create(self, bundle, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Creates a new object based on the provided data.</p>
<p><em>This needs to be implemented at the user level.</em></p>
<p><tt class="docutils literal"><span class="pre">ModelResource</span></tt> includes a full working version specific to Django&#8217;s
<tt class="docutils literal"><span class="pre">Models</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.obj_update(self, bundle, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Updates an existing object (or creates a new object) based on the
provided data.</p>
<p><em>This needs to be implemented at the user level.</em></p>
<p><tt class="docutils literal"><span class="pre">ModelResource</span></tt> includes a full working version specific to Django&#8217;s
<tt class="docutils literal"><span class="pre">Models</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.obj_delete_list(self, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Deletes an entire list of objects.</p>
<p><em>This needs to be implemented at the user level.</em></p>
<p><tt class="docutils literal"><span class="pre">ModelResource</span></tt> includes a full working version specific to Django&#8217;s
<tt class="docutils literal"><span class="pre">Models</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.obj_delete(self, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Deletes a single object.</p>
<p><em>This needs to be implemented at the user level.</em></p>
<p><tt class="docutils literal"><span class="pre">ModelResource</span></tt> includes a full working version specific to Django&#8217;s
<tt class="docutils literal"><span class="pre">Models</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.create_response(self, request, data):</tt></dt>
<dd></dd></dl>

<p>Extracts the common &#8220;which-format/serialize/return-response&#8221; cycle.</p>
<p>Mostly a useful shortcut/hook.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.get_list(self, request, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Returns a serialized list of resources.</p>
<p>Calls <tt class="docutils literal"><span class="pre">obj_get_list</span></tt> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p>
<dl class="method">
<dt>
<tt class="descname">Resource.get_detail(self, request, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Returns a single serialized resource.</p>
<p>Calls <tt class="docutils literal"><span class="pre">cached_obj_get/obj_get</span></tt> to provide the data, then handles that result
set and serializes it.</p>
<p>Should return a HttpResponse (200 OK).</p>
<dl class="method">
<dt>
<tt class="descname">Resource.put_list(self, request, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Replaces a collection of resources with another collection.</p>
<p>Calls <tt class="docutils literal"><span class="pre">delete_list</span></tt> to clear out the collection then <tt class="docutils literal"><span class="pre">obj_create</span></tt>
with the provided the data to create the new collection.</p>
<p>Return <tt class="docutils literal"><span class="pre">HttpAccepted</span></tt> (204 No Content).</p>
<dl class="method">
<dt>
<tt class="descname">Resource.put_detail(self, request, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Either updates an existing resource or creates a new one with the
provided data.</p>
<p>Calls <tt class="docutils literal"><span class="pre">obj_update</span></tt> with the provided data first, but falls back to
<tt class="docutils literal"><span class="pre">obj_create</span></tt> if the object does not already exist.</p>
<p>If a new resource is created, return <tt class="docutils literal"><span class="pre">HttpCreated</span></tt> (201 Created).
If an existing resource is modified, return <tt class="docutils literal"><span class="pre">HttpAccepted</span></tt> (204 No Content).</p>
<dl class="method">
<dt>
<tt class="descname">Resource.post_list(self, request, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Creates a new resource/object with the provided data.</p>
<p>Calls <tt class="docutils literal"><span class="pre">obj_create</span></tt> with the provided data and returns a response
with the new resource&#8217;s location.</p>
<p>If a new resource is created, return <tt class="docutils literal"><span class="pre">HttpCreated</span></tt> (201 Created).</p>
<dl class="method">
<dt>
<tt class="descname">Resource.post_detail(self, request, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Creates a new subcollection of the resource under a resource.</p>
<p>This is not implemented by default because most people&#8217;s data models
aren&#8217;t self-referential.</p>
<p>If a new resource is created, return <tt class="docutils literal"><span class="pre">HttpCreated</span></tt> (201 Created).</p>
<dl class="method">
<dt>
<tt class="descname">Resource.delete_list(self, request, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Destroys a collection of resources/objects.</p>
<p>Calls <tt class="docutils literal"><span class="pre">obj_delete_list</span></tt>.</p>
<p>If the resources are deleted, return <tt class="docutils literal"><span class="pre">HttpAccepted</span></tt> (204 No Content).</p>
<dl class="method">
<dt>
<tt class="descname">Resource.delete_detail(self, request, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Destroys a single resource/object.</p>
<p>Calls <tt class="docutils literal"><span class="pre">obj_delete</span></tt>.</p>
<p>If the resource is deleted, return <tt class="docutils literal"><span class="pre">HttpAccepted</span></tt> (204 No Content).
If the resource did not exist, return <tt class="docutils literal"><span class="pre">HttpGone</span></tt> (410 Gone).</p>
<dl class="method">
<dt>
<tt class="descname">Resource.get_schema(self, request, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Returns a serialized form of the schema of the resource.</p>
<p>Calls <tt class="docutils literal"><span class="pre">build_schema</span></tt> to generate the data. This method only responds
to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p>
<dl class="method">
<dt>
<tt class="descname">Resource.get_multiple(self, request, **kwargs):</tt></dt>
<dd></dd></dl>

<p>Returns a serialized list of resources based on the identifiers
from the URL.</p>
<p>Calls <tt class="docutils literal"><span class="pre">obj_get</span></tt> to fetch only the objects requested. This method
only responds to HTTP GET.</p>
<p>Should return a HttpResponse (200 OK).</p>
</div>
<div class="section" id="modelresource-methods">
<h2><tt class="docutils literal"><span class="pre">ModelResource</span></tt> Methods<a class="headerlink" href="#modelresource-methods" title="Permalink to this headline">¶</a></h2>
<p>A subclass of <tt class="docutils literal"><span class="pre">Resource</span></tt> designed to work with Django&#8217;s <tt class="docutils literal"><span class="pre">Models</span></tt>.</p>
<p>This class will introspect a given <tt class="docutils literal"><span class="pre">Model</span></tt> and build a field list based
on the fields found on the model (excluding relational fields).</p>
<p>Given that it is aware of Django&#8217;s ORM, it also handles the CRUD data
operations of the resource.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.should_skip_field(cls, field):</tt></dt>
<dd></dd></dl>

<p><em>Class method</em></p>
<p>Given a Django model field, return if it should be included in the
contributed ApiFields.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.api_field_from_django_field(cls, f, default=CharField):</tt></dt>
<dd></dd></dl>

<p><em>Class method</em></p>
<p>Returns the field type that would likely be associated with each
Django type.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.get_fields(cls, fields=None, excludes=None):</tt></dt>
<dd></dd></dl>

<p><em>Class method</em></p>
<p>Given any explicit fields to include and fields to exclude, add
additional fields based on the associated model.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.build_filters(self, filters=None):</tt></dt>
<dd></dd></dl>

<p>Given a dictionary of filters, create the necessary ORM-level filters.</p>
<p>Keys should be resource fields, <strong>NOT</strong> model fields.</p>
<p>Valid values are either a list of Django filter types (i.e.
<tt class="docutils literal"><span class="pre">['startswith',</span> <span class="pre">'exact',</span> <span class="pre">'lte']</span></tt>), the <tt class="docutils literal"><span class="pre">ALL</span></tt> constant or the
<tt class="docutils literal"><span class="pre">ALL_WITH_RELATIONS</span></tt> constant.</p>
<p>At the declarative level:</p>
<div class="highlight-python"><pre>filtering = {
    'resource_field_name': ['exact', 'startswith', 'endswith', 'contains'],
    'resource_field_name_2': ['exact', 'gt', 'gte', 'lt', 'lte', 'range'],
    'resource_field_name_3': ALL,
    'resource_field_name_4': ALL_WITH_RELATIONS,
    ...
}</pre>
</div>
<p>Accepts the filters as a dict. <tt class="xref docutils literal"><span class="pre">None</span></tt> by default, meaning no filters.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.apply_sorting(self, obj_list, options=None):</tt></dt>
<dd></dd></dl>

<p>Given a dictionary of options, apply some ORM-level sorting to the
provided <tt class="docutils literal"><span class="pre">QuerySet</span></tt>.</p>
<p>Looks for the <tt class="docutils literal"><span class="pre">sort_by</span></tt> key and handles either ascending (just the
field name) or descending (the field name with a <tt class="docutils literal"><span class="pre">-</span></tt> in front).</p>
<p>The field name should be the resource field, <strong>NOT</strong> model field.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.obj_get_list(self, filters=None, **kwargs):</tt></dt>
<dd></dd></dl>

<p>A ORM-specific implementation of <tt class="docutils literal"><span class="pre">obj_get_list</span></tt>.</p>
<p>Takes an optional <tt class="docutils literal"><span class="pre">filters</span></tt> dictionary, which can be used to narrow
the query.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.obj_get(self, **kwargs):</tt></dt>
<dd></dd></dl>

<p>A ORM-specific implementation of <tt class="docutils literal"><span class="pre">obj_get</span></tt>.</p>
<p>Takes optional <tt class="docutils literal"><span class="pre">kwargs</span></tt>, which are used to narrow the query to find
the instance.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.obj_create(self, bundle, **kwargs):</tt></dt>
<dd></dd></dl>

<p>A ORM-specific implementation of <tt class="docutils literal"><span class="pre">obj_create</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.obj_update(self, bundle, **kwargs):</tt></dt>
<dd></dd></dl>

<p>A ORM-specific implementation of <tt class="docutils literal"><span class="pre">obj_update</span></tt>.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.obj_delete_list(self, **kwargs):</tt></dt>
<dd></dd></dl>

<p>A ORM-specific implementation of <tt class="docutils literal"><span class="pre">obj_delete_list</span></tt>.</p>
<p>Takes optional <tt class="docutils literal"><span class="pre">kwargs</span></tt>, which can be used to narrow the query.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.obj_delete(self, **kwargs):</tt></dt>
<dd></dd></dl>

<p>A ORM-specific implementation of <tt class="docutils literal"><span class="pre">obj_delete</span></tt>.</p>
<p>Takes optional <tt class="docutils literal"><span class="pre">kwargs</span></tt>, which are used to narrow the query to find
the instance.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.save_m2m(self, bundle):</tt></dt>
<dd></dd></dl>

<p>Handles the saving of related M2M data.</p>
<p>Due to the way Django works, the M2M data must be handled after the
main instance, which is why this isn&#8217;t a part of the main <tt class="docutils literal"><span class="pre">save</span></tt> bits.</p>
<p>Currently slightly inefficient in that it will clear out the whole
relation and recreate the related data as needed.</p>
<dl class="method">
<dt>
<tt class="descname">Resource.get_resource_uri(self, bundle_or_obj):</tt></dt>
<dd></dd></dl>

<p>Handles generating a resource URI for a single resource.</p>
<p>Uses the model&#8217;s <tt class="docutils literal"><span class="pre">pk</span></tt> in order to create the URI.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="toc.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Resources</a><ul>
<li><a class="reference internal" href="#quick-start">Quick Start</a></li>
<li><a class="reference internal" href="#why-class-based">Why Class-Based?</a></li>
<li><a class="reference internal" href="#why-resource-vs-modelresource">Why <tt class="docutils literal"><span class="pre">Resource</span></tt> vs. <tt class="docutils literal"><span class="pre">ModelResource</span></tt>?</a></li>
<li><a class="reference internal" href="#flow-through-the-request-response-cycle">Flow Through The Request/Response Cycle</a></li>
<li><a class="reference internal" href="#what-are-bundles">What Are Bundles?</a></li>
<li><a class="reference internal" href="#why-resource-uris">Why Resource URIs?</a></li>
<li><a class="reference internal" href="#advanced-data-preparation">Advanced Data Preparation</a><ul>
<li><a class="reference internal" href="#dehydrate"><tt class="docutils literal"><span class="pre">dehydrate</span></tt></a></li>
<li><a class="reference internal" href="#dehydrate-foo"><tt class="docutils literal"><span class="pre">dehydrate_FOO</span></tt></a></li>
<li><a class="reference internal" href="#hydrate"><tt class="docutils literal"><span class="pre">hydrate</span></tt></a></li>
<li><a class="reference internal" href="#hydrate-foo"><tt class="docutils literal"><span class="pre">hydrate_FOO</span></tt></a></li>
</ul>
</li>
<li><a class="reference internal" href="#reverse-relationships">Reverse &#8220;Relationships&#8221;</a></li>
<li><a class="reference internal" href="#resource-options-aka-meta">Resource Options (AKA <tt class="docutils literal"><span class="pre">Meta</span></tt>)</a></li>
<li><a class="reference internal" href="#basic-filtering">Basic Filtering</a></li>
<li><a class="reference internal" href="#advanced-filtering">Advanced Filtering</a></li>
<li><a class="reference internal" href="#resource-methods"><tt class="docutils literal"><span class="pre">Resource</span></tt> Methods</a></li>
<li><a class="reference internal" href="#modelresource-methods"><tt class="docutils literal"><span class="pre">ModelResource</span></tt> Methods</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="settings.html"
                        title="previous chapter">Tastypie Settings</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="api.html"
                        title="next chapter">Api</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/resources.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="api.html" title="Api"
             >next</a> |</li>
        <li class="right" >
          <a href="settings.html" title="Tastypie Settings"
             >previous</a> |</li>
        <li><a href="toc.html">Tastypie v0.9.0-beta documentation</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Daniel Lindsley, Cody Soyland &amp; Matt Croydon.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.4.
    </div>
  </body>
</html>